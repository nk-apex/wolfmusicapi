<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WolfMusicApi - YouTube MP3 & MP4 Download API</title>
  <meta name="description" content="Free API to search, convert and download YouTube content as MP3 or MP4. Multiple endpoints for maximum compatibility.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg: #000000; --card: rgba(0, 20, 0, 0.6); --border: rgba(0, 255, 0, 0.2);
      --fg: #ffffff; --fg-secondary: rgba(255,255,255,0.6); --fg-muted: rgba(255,255,255,0.45);
      --neon: #00ff00; --neon-dim: #004d00;
      --radius: 8px; --font: 'JetBrains Mono', monospace; --font-heading: 'Orbitron', sans-serif;
    }
    body { background: var(--bg); color: var(--fg); font-family: var(--font); line-height: 1.6; }
    a { color: var(--neon); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .container { max-width: 960px; margin: 0 auto; padding: 0 20px; }
    canvas#particles { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
    .content { position: relative; z-index: 1; }

    header { border-bottom: 1px solid var(--border); padding: 14px 0; position: sticky; top: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(16px); z-index: 50; }
    header .inner { display: flex; align-items: center; justify-content: space-between; }
    .logo { display: flex; align-items: center; gap: 12px; }
    .logo-icon { width: 36px; height: 36px; background: rgba(0,255,0,0.1); border: 1px solid rgba(0,255,0,0.3); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; box-shadow: 0 0 12px rgba(0,255,0,0.2); font-size: 18px; }
    .logo-text { font-family: var(--font-heading); font-size: 18px; font-weight: 700; color: var(--neon); letter-spacing: 2px; }
    .status { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--neon); }
    .status-dot { width: 6px; height: 6px; background: var(--neon); border-radius: 50%; box-shadow: 0 0 8px var(--neon); animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

    .hero { text-align: center; padding: 80px 0 60px; background: radial-gradient(ellipse at center top, rgba(0,255,0,0.06), transparent 60%); }
    .hero-badge { display: inline-flex; align-items: center; gap: 8px; font-size: 11px; color: rgba(0,255,0,0.7); border: 1px solid rgba(0,255,0,0.3); padding: 6px 14px; border-radius: var(--radius); margin-bottom: 24px; background: rgba(0,255,0,0.05); letter-spacing: 1px; }
    .hero h2 { font-family: var(--font-heading); font-size: 42px; font-weight: 700; letter-spacing: -0.01em; line-height: 1.2; margin-bottom: 16px; color: #ffffff; }
    .hero h2 span { color: var(--neon); text-shadow: 0 0 30px rgba(0,255,0,0.4); }
    .hero p { color: var(--fg-secondary); font-size: 16px; max-width: 560px; margin: 0 auto 28px; }
    .stats { display: flex; justify-content: center; gap: 48px; margin-top: 36px; }
    .stat-num { font-family: var(--font-heading); font-size: 30px; font-weight: 700; color: var(--neon); text-shadow: 0 0 20px rgba(0,255,0,0.3); }
    .stat-label { font-size: 11px; color: rgba(255,255,255,0.35); letter-spacing: 1px; margin-top: 4px; }
    .btn-row { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
    .btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 20px; border-radius: var(--radius); font-size: 13px; font-weight: 600; cursor: pointer; border: none; font-family: var(--font); transition: all 0.2s; }
    .btn:hover { text-decoration: none; }
    .btn-primary { background: var(--neon); color: #000; box-shadow: 0 0 16px rgba(0,255,0,0.3); }
    .btn-primary:hover { box-shadow: 0 0 24px rgba(0,255,0,0.5); }
    .btn-outline { background: transparent; color: var(--neon); border: 1px solid var(--border); }
    .btn-outline:hover { border-color: rgba(0,255,0,0.5); box-shadow: 0 0 12px rgba(0,255,0,0.1); }

    section { padding: 48px 0; }
    h3 { font-family: var(--font-heading); font-size: 20px; font-weight: 600; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; color: #ffffff; }
    .section-icon { color: var(--neon); }

    .glass { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); backdrop-filter: blur(12px); transition: box-shadow 0.3s, border-color 0.3s; padding: 16px; margin-bottom: 12px; }
    .glass:hover { box-shadow: 0 0 24px rgba(0,255,0,0.15); border-color: rgba(0,255,0,0.4); }
    .endpoint-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; flex-wrap: wrap; }
    .method-badge { background: rgba(0,255,0,0.1); color: var(--neon); font-family: var(--font); font-size: 11px; font-weight: 600; padding: 3px 8px; border-radius: 4px; }
    .format-badge { font-size: 11px; color: rgba(255,255,255,0.7); border: 1px solid rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 4px; margin-left: auto; }
    .path { font-family: var(--font); font-size: 14px; color: #ffffff; }
    .desc { font-size: 13px; color: var(--fg-secondary); margin-bottom: 10px; }
    .param { display: flex; align-items: center; gap: 6px; font-size: 12px; margin-bottom: 4px; flex-wrap: wrap; }
    .param code { font-family: var(--font); background: rgba(0,255,0,0.08); color: var(--neon); padding: 2px 6px; border-radius: 4px; }
    .param .type { color: var(--fg-muted); }
    .param .required { color: #ff4444; font-size: 10px; font-weight: 700; }
    .example-url { background: rgba(255,255,255,0.03); border-radius: var(--radius); padding: 8px 12px; margin-top: 10px; display: flex; align-items: center; gap: 8px; }
    .example-url code { font-family: var(--font); font-size: 11px; color: var(--fg-muted); word-break: break-all; flex: 1; }
    .copy-btn { background: none; border: none; color: var(--fg-muted); cursor: pointer; padding: 4px; font-size: 14px; transition: color 0.2s; }
    .copy-btn:hover { color: var(--neon); }

    .grid-2 { display: grid; grid-template-columns: repeat(auto-fill, minmax(420px, 1fr)); gap: 12px; }
    @media (max-width: 500px) { .grid-2 { grid-template-columns: 1fr; } .hero h2 { font-size: 28px; } .stats { gap: 24px; } }

    .tabs { display: flex; gap: 4px; padding: 4px; border-radius: var(--radius); margin-bottom: 16px; width: fit-content; background: rgba(0,255,0,0.05); border: 1px solid rgba(0,255,0,0.15); }
    .tab { padding: 8px 16px; border-radius: 6px; font-size: 13px; font-weight: 500; cursor: pointer; border: none; background: none; color: rgba(255,255,255,0.5); transition: all 0.2s; font-family: var(--font); }
    .tab.active { background: rgba(0,255,0,0.15); color: var(--neon); box-shadow: 0 0 10px rgba(0,255,0,0.1); }
    .tab:hover:not(.active) { color: var(--neon); }

    .playground-form { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
    @media (max-width: 600px) { .playground-form { grid-template-columns: 1fr; } }
    .form-group label { display: block; font-size: 12px; font-weight: 500; margin-bottom: 6px; color: rgba(255,255,255,0.7); }
    .form-group select, .form-group input { width: 100%; height: 40px; border-radius: var(--radius); border: 1px solid var(--border); background: rgba(0,255,0,0.05); color: #ffffff; padding: 0 12px; font-size: 13px; font-family: var(--font); }
    .form-group select option { background: #000; color: var(--neon); }
    .form-group select:focus, .form-group input:focus { outline: none; border-color: rgba(0,255,0,0.5); box-shadow: 0 0 12px rgba(0,255,0,0.1); }
    .execute-row { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; flex-wrap: wrap; }
    .execute-row code { font-family: var(--font); font-size: 11px; color: var(--fg-muted); background: rgba(255,255,255,0.03); padding: 8px 12px; border-radius: var(--radius); flex: 1; word-break: break-all; }
    .result-box { background: rgba(0,0,0,0.6); border: 1px solid rgba(0,255,0,0.15); border-radius: var(--radius); padding: 16px; overflow: auto; max-height: 320px; }
    .result-box pre { font-family: var(--font); font-size: 12px; white-space: pre-wrap; word-break: break-all; color: var(--neon); }

    .api-log { display: flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: var(--radius); font-size: 12px; background: rgba(0,255,0,0.05); border-left: 2px solid var(--neon); color: rgba(255,255,255,0.6); margin-bottom: 12px; }
    .result-card { display: flex; gap: 12px; align-items: flex-start; }
    .result-thumb { width: 96px; height: 64px; border-radius: var(--radius); background-size: cover; background-position: center; flex-shrink: 0; border: 1px solid var(--border); }
    .result-info { flex: 1; min-width: 0; }
    .result-title { font-size: 13px; font-weight: 500; color: #ffffff; margin-bottom: 4px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    .result-meta { display: flex; gap: 12px; font-size: 11px; color: rgba(255,255,255,0.5); margin-bottom: 8px; flex-wrap: wrap; }
    .result-btns { display: flex; gap: 6px; flex-wrap: wrap; }
    .btn-sm { padding: 4px 10px; font-size: 11px; border-radius: 4px; }

    .raw-toggle { cursor: pointer; font-size: 12px; color: rgba(255,255,255,0.5); background: rgba(255,255,255,0.03); padding: 8px 12px; border-radius: var(--radius); margin-top: 12px; }
    .raw-toggle:hover { color: var(--neon); }

    .code-card pre { background: rgba(0,0,0,0.5); border: 1px solid rgba(0,255,0,0.1); border-radius: var(--radius); padding: 12px; font-family: var(--font); font-size: 12px; overflow: auto; color: var(--neon); }
    .lang { font-size: 11px; color: rgba(0,255,0,0.6); border: 1px solid rgba(0,255,0,0.2); padding: 2px 8px; border-radius: 4px; }

    footer { border-top: 1px solid rgba(0,255,0,0.1); padding: 20px 0; margin-top: 40px; }
    footer .inner { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 8px; }
    footer .brand { font-family: var(--font-heading); font-size: 12px; color: rgba(255,255,255,0.3); }
    footer a { color: rgba(255,255,255,0.4); font-size: 13px; }

    .spinner { display: inline-block; width: 16px; height: 16px; border: 2px solid rgba(0,255,0,0.2); border-top-color: var(--neon); border-radius: 50%; animation: spin 0.6s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .hidden { display: none; }
    .loading-center { display: flex; align-items: center; justify-content: center; padding: 48px 0; gap: 8px; color: rgba(255,255,255,0.5); }
  </style>
</head>
<body>

<canvas id="particles"></canvas>

<div class="content">

<header>
  <div class="container inner">
    <div class="logo">
      <img src="/wolf-logo.png" alt="WolfMusicApi Logo" style="width:40px;height:40px;border-radius:var(--radius);object-fit:cover;border:1px solid rgba(0,255,0,0.3);box-shadow:0 0 12px rgba(0,255,0,0.2)">
      <span class="logo-text"><span style="color:#00ff00">WolfMusic</span><span style="color:#ffffff">Api</span></span>
    </div>
    <div class="status"><div class="status-dot"></div> ONLINE</div>
  </div>
</header>

<div class="hero">
  <div class="container">
    <div class="hero-badge"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg> OPEN API // FREE ACCESS</div>
    <h2>Download Music & Video<br><span>via Simple API</span></h2>
    <p>Search, convert and download YouTube content as MP3 or MP4. Multiple endpoints for maximum compatibility.</p>
    <div class="btn-row">
      <a href="#playground" class="btn btn-primary"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg> Test Endpoints</a>
      <a href="#endpoints" class="btn btn-outline"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg> View Docs</a>
    </div>
    <div class="stats">
      <div><div class="stat-num">7</div><div class="stat-label">ENDPOINTS</div></div>
      <div><div class="stat-num">2</div><div class="stat-label">FORMATS</div></div>
      <div><div class="stat-num">0</div><div class="stat-label">AUTH</div></div>
    </div>
  </div>
</div>

<section id="endpoints">
  <div class="container">
    <h3><span class="section-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg></span> API Endpoints</h3>
    <div class="tabs">
      <button class="tab active" onclick="showTab('download')">Download (7)</button>
      <button class="tab" onclick="showTab('search')">Search (1)</button>
    </div>
    <div id="tab-download"><div class="grid-2" id="download-endpoints"></div></div>
    <div id="tab-search" class="hidden"><div id="search-endpoints"></div></div>
  </div>
</section>

<section id="playground">
  <div class="container">
    <h3><span class="section-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></span> API Playground</h3>
    <p style="font-size:13px;color:rgba(255,255,255,0.5);margin-bottom:16px">Select an endpoint, enter a song name or YouTube URL, then hit Execute to see the live API response.</p>
    <div class="glass" style="box-shadow:0 0 20px rgba(0,255,0,0.1);padding:24px">
      <div class="playground-form">
        <div class="form-group">
          <label>Endpoint</label>
          <select id="pg-endpoint" onchange="updatePlayground()">
            <option value="/api/search" selected>GET /api/search</option>
            <option value="/download/audio">GET /download/audio</option>
            <option value="/download/ytmp3">GET /download/ytmp3</option>
            <option value="/download/dlmp3">GET /download/dlmp3</option>
            <option value="/download/mp3">GET /download/mp3</option>
            <option value="/download/yta">GET /download/yta</option>
            <option value="/download/yta2">GET /download/yta2</option>
            <option value="/download/yta3">GET /download/yta3</option>
            <option value="/download/mp4">GET /download/mp4</option>
          </select>
        </div>
        <div class="form-group">
          <label id="pg-label">Song Name</label>
          <input type="text" id="pg-input" value="" placeholder="e.g. Home by NF, Alan Walker Faded..." onkeydown="if(event.key==='Enter')executePlayground()">
        </div>
      </div>
      <div style="margin-bottom:16px">
        <button class="btn btn-primary" id="pg-execute" onclick="executePlayground()" style="margin-bottom:12px"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg> Execute</button>
        <div style="display:flex;align-items:center;gap:8px;background:rgba(0,255,0,0.03);border:1px solid rgba(0,255,0,0.1);border-radius:var(--radius);padding:10px 14px">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#00ff00" stroke-width="2" style="flex-shrink:0"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg>
          <code id="pg-preview" style="font-size:11px;color:rgba(255,255,255,0.6);word-break:break-all;flex:1"></code>
          <button class="copy-btn" id="pg-copy-url" onclick="copyFullUrl()" title="Copy full URL"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
        </div>
      </div>
      <div id="pg-loading" class="loading-center hidden"><span class="spinner"></span> Fetching response...</div>
      <div id="pg-search-results"></div>
      <div id="pg-result" class="hidden"><div class="result-box"><pre id="pg-result-text"></pre></div></div>
    </div>
  </div>
</section>

<section>
  <div class="container">
    <h3><span class="section-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg></span> Quick Start</h3>
    <div class="grid-2">
      <div class="glass code-card" style="box-shadow:0 0 20px rgba(0,255,0,0.1)">
        <div style="margin-bottom:10px;font-size:13px;display:flex;align-items:center;gap:8px;color:#fff"><span class="lang">JavaScript</span> Fetch MP3</div>
        <pre>const res = await fetch(
  '<span class="js-base"></span>/download/mp3?url=' +
  encodeURIComponent(youtubeUrl)
);
const data = await res.json();
console.log(data.downloadUrl);</pre>
      </div>
      <div class="glass code-card" style="box-shadow:0 0 20px rgba(0,255,0,0.1)">
        <div style="margin-bottom:10px;font-size:13px;display:flex;align-items:center;gap:8px;color:#fff"><span class="lang">Python</span> Search & Download</div>
        <pre>import requests

results = requests.get(
  '<span class="js-base"></span>/api/search',
  params={'q': 'Alan Walker Faded'}
).json()

for item in results:
    print(item['title'], item['id'])</pre>
      </div>
    </div>
  </div>
</section>

<footer>
  <div class="container inner">
    <span class="brand"><span style="color:rgba(0,255,0,0.3)">WolfMusic</span><span style="color:rgba(255,255,255,0.3)">Api</span></span>
    <a href="https://rinodepot.fr" target="_blank" rel="noopener noreferrer">Source <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:-1px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></a>
  </div>
</footer>

</div>

<script>
const BASE = window.location.origin;
const endpoints = [
  { path:"/download/audio", method:"GET", desc:"Download audio from a YouTube URL", param:"url", format:"mp3" },
  { path:"/download/ytmp3", method:"GET", desc:"Convert YouTube video to MP3", param:"url", format:"mp3" },
  { path:"/download/dlmp3", method:"GET", desc:"Direct MP3 download from YouTube URL", param:"url", format:"mp3" },
  { path:"/download/mp3", method:"GET", desc:"MP3 download endpoint", param:"url", format:"mp3" },
  { path:"/download/yta", method:"GET", desc:"YouTube Audio extractor (primary)", param:"url", format:"mp3" },
  { path:"/download/yta2", method:"GET", desc:"YouTube Audio extractor (secondary)", param:"url", format:"mp3" },
  { path:"/download/yta3", method:"GET", desc:"YouTube Audio extractor (tertiary)", param:"url", format:"mp3" },
  { path:"/download/mp4", method:"GET", desc:"Download video as MP4 from YouTube URL", param:"url", format:"mp4" },
  { path:"/api/search", method:"GET", desc:"Search for songs by keyword", param:"q", format:"json" },
];

function renderEndpoint(ep) {
  const example = ep.param==='q' ? `${BASE}${ep.path}?q=Alan+Walker+Faded` : `${BASE}${ep.path}?url=https://youtube.com/watch?v=60ItHLz5WEA`;
  const paramDesc = ep.param==='q' ? 'Search query (song name, artist, etc.)' : 'YouTube video URL';
  return `<div class="glass">
    <div class="endpoint-header">
      <span class="method-badge">${ep.method}</span>
      <span class="path">${ep.path}</span>
      ${ep.format!=='json' ? `<span class="format-badge">${ep.format.toUpperCase()}</span>` : ''}
    </div>
    <div class="desc">${ep.desc}</div>
    <div class="param"><code>${ep.param}</code><span class="type">string</span><span class="required">REQUIRED</span><span class="type">- ${paramDesc}</span></div>
    <div class="example-url"><code>${example}</code><button class="copy-btn" onclick="copyText('${example}')" title="Copy"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button></div>
  </div>`;
}

document.getElementById('download-endpoints').innerHTML = endpoints.filter(e=>e.path.startsWith('/download')).map(renderEndpoint).join('');
document.getElementById('search-endpoints').innerHTML = endpoints.filter(e=>e.path.startsWith('/api')).map(renderEndpoint).join('');
document.querySelectorAll('.js-base').forEach(el=>el.textContent=BASE);

function showTab(tab) {
  document.getElementById('tab-download').classList.toggle('hidden', tab!=='download');
  document.getElementById('tab-search').classList.toggle('hidden', tab!=='search');
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  event.target.classList.add('active');
}

function updatePlayground() {
  const ep = document.getElementById('pg-endpoint').value;
  const isSearch = ep==='/api/search';
  document.getElementById('pg-label').textContent = isSearch ? 'Song Name' : 'YouTube URL';
  document.getElementById('pg-input').placeholder = isSearch ? 'e.g. Home by NF, Alan Walker Faded...' : 'https://youtube.com/watch?v=...';
  document.getElementById('pg-input').value = isSearch ? '' : 'https://youtube.com/watch?v=60ItHLz5WEA';
  document.getElementById('pg-result').classList.add('hidden');
  document.getElementById('pg-search-results').innerHTML = '';
  updatePreview();
}
function getFullUrl() {
  const ep = document.getElementById('pg-endpoint').value;
  const val = document.getElementById('pg-input').value;
  const param = ep==='/api/search' ? 'q' : 'url';
  return `${BASE}${ep}?${param}=${encodeURIComponent(val)}`;
}
function updatePreview() {
  document.getElementById('pg-preview').textContent = getFullUrl();
}
function copyFullUrl() {
  navigator.clipboard.writeText(getFullUrl()).then(()=>{
    const btn = document.getElementById('pg-copy-url');
    if (btn) { const orig = btn.innerHTML; btn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#00ff00" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>'; setTimeout(()=>btn.innerHTML = orig, 1500); }
  });
}
document.getElementById('pg-input').addEventListener('input', updatePreview);
updatePreview();

async function executePlayground() {
  const ep = document.getElementById('pg-endpoint').value;
  const val = document.getElementById('pg-input').value.trim();
  if (!val) return;
  const param = ep==='/api/search' ? 'q' : 'url';
  const btn = document.getElementById('pg-execute');
  btn.innerHTML = '<span class="spinner"></span> Loading...';
  btn.disabled = true;
  document.getElementById('pg-loading').classList.remove('hidden');
  document.getElementById('pg-result').classList.add('hidden');
  document.getElementById('pg-search-results').innerHTML = '';
  try {
    const res = await fetch(`${ep}?${param}=${encodeURIComponent(val)}`);
    const data = await res.json();
    document.getElementById('pg-loading').classList.add('hidden');

    if (ep === '/api/search' && Array.isArray(data) && data.length > 0) {
      const items = data;
      let html = `<div class="api-log"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#00ff00" stroke-width="2"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg> GET /api/search?q=${encodeURIComponent(val)} -- ${items.length} results</div>`;
      html += items.map(r => {
        const mp3 = `${BASE}/download/mp3?url=https://youtube.com/watch?v=${r.id}`;
        const mp4 = `${BASE}/download/mp4?url=https://youtube.com/watch?v=${r.id}`;
        const yt = `https://youtube.com/watch?v=${r.id}`;
        return `<div class="glass">
          <div class="result-card">
            <div class="result-thumb" style="background-image:url(https://img.youtube.com/vi/${r.id}/mqdefault.jpg)"></div>
            <div class="result-info">
              <div class="result-title">${r.title || ''}</div>
              <div class="result-meta">
                ${r.channelTitle ? `<span>${r.channelTitle}</span>` : ''}
                ${r.duration ? `<span>${r.duration}</span>` : ''}
                ${r.size ? `<span>${r.size}</span>` : ''}
              </div>
              <div class="result-btns">
                <a href="${mp3}" target="_blank" class="btn btn-primary btn-sm">MP3</a>
                <a href="${mp4}" target="_blank" class="btn btn-outline btn-sm">MP4</a>
                <a href="${yt}" target="_blank" class="btn btn-outline btn-sm">Watch</a>
              </div>
            </div>
          </div>
        </div>`;
      }).join('');
      html += `<details class="raw-toggle"><summary>View Raw JSON Response</summary><div class="result-box" style="margin-top:8px"><pre>${JSON.stringify(data, null, 2)}</pre></div></details>`;
      document.getElementById('pg-search-results').innerHTML = html;
    } else if (ep === '/api/search' && Array.isArray(data) && data.length === 0) {
      document.getElementById('pg-search-results').innerHTML = '<div class="glass" style="text-align:center;padding:32px;color:rgba(255,255,255,0.4)">No results found. Try a different song name.</div>';
    } else {
      document.getElementById('pg-result').classList.remove('hidden');
      document.getElementById('pg-result-text').textContent = JSON.stringify(data, null, 2);
    }
  } catch(err) {
    document.getElementById('pg-loading').classList.add('hidden');
    document.getElementById('pg-result').classList.remove('hidden');
    document.getElementById('pg-result-text').textContent = JSON.stringify({error:err.message}, null, 2);
  }
  btn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg> Execute';
  btn.disabled = false;
}

function copyText(text) {
  navigator.clipboard.writeText(text).then(()=>{
    const btn = event.target.closest('.copy-btn');
    if (btn) { const orig = btn.innerHTML; btn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#00ff00" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>'; setTimeout(()=>btn.innerHTML = orig, 1500); }
  });
}

// Floating neon particles
(function() {
  const canvas = document.getElementById('particles');
  const ctx = canvas.getContext('2d');
  let particles = [];
  function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
  resize();
  window.addEventListener('resize', resize);
  for (let i = 0; i < 50; i++) {
    particles.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, vx: (Math.random()-0.5)*0.3, vy: (Math.random()-0.5)*0.3, size: Math.random()*2+0.5, alpha: Math.random()*0.5+0.1 });
  }
  function animate() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p => {
      p.x += p.vx; p.y += p.vy;
      if(p.x<0) p.x=canvas.width; if(p.x>canvas.width) p.x=0;
      if(p.y<0) p.y=canvas.height; if(p.y>canvas.height) p.y=0;
      ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
      ctx.fillStyle = `rgba(0,255,0,${p.alpha})`;
      ctx.shadowBlur = 8; ctx.shadowColor = 'rgba(0,255,0,0.5)';
      ctx.fill();
    });
    requestAnimationFrame(animate);
  }
  animate();
})();
</script>
</body>
</html>
